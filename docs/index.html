<!DOCTYPE html>
<html>
<head>
    <title>42 cursus Libft project</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            line-height: 1.6;
        }
        ul {
            list-style-type: none;
            margin-left: 20px;
            padding: 0;
        }
        li {
            cursor: pointer;
            margin: 5px 0;
        }
        .file {
            cursor: default;
        }
        .folder::before {
            content: "ðŸ“‚ ";
        }
        .file::before {
            content: "ðŸ“„ ";
        }
    </style>
</head>
<body>
<h1>Welcome to 42 cursus Libft project</h1>
<p>Repository Structure</p>
<div id="repo-structure">
    Loading repository structure...
</div>

<script>
    const repo = '42cursus/libft';
    const apiBaseUrl = `https://api.github.com/repos/${repo}/contents`;

    async function fetchContents(url, parentElement) {
        try {
            const response = await fetch(url);
            const items = await response.json();

            // Create a list to display contents
            const list = document.createElement('ul');
            items.forEach(item => {
                const listItem = document.createElement('li');
                listItem.textContent = item.name;
                listItem.classList.add(item.type === 'dir' ? 'folder' : 'file');
                list.appendChild(listItem);

                if (item.type === 'dir') {
                    listItem.addEventListener('click', async (e) => {
                        e.stopPropagation(); // Prevent bubbling
                        if (listItem.querySelector('ul')) {
                            // Collapse folder if already expanded
                            listItem.querySelector('ul').remove();
                        } else {
                            // Fetch and display folder contents
                            const subList = document.createElement('ul');
                            listItem.appendChild(subList);
                            await fetchContents(item.url, subList);
                        }
                    });
                }
            });

            // Append the list to the parent element
            parentElement.appendChild(list);
        } catch (error) {
            console.error("Error fetching repository contents:", error);
            parentElement.textContent = 'Failed to load repository structure.';
        }
    }

    // Initialize the structure on page load
    document.addEventListener('DOMContentLoaded', () => {
        const container = document.getElementById('repo-structure');
        fetchContents(apiBaseUrl, container);
    });
</script>
</body>
</html>
